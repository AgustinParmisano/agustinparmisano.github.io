<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test S√≠mbolos Gantt</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üß™ Test de S√≠mbolos en Diagrama de Gantt</h1>
            <h2>Verificaci√≥n de s√≠mbolos > (llegada) y < (finalizaci√≥n)</h2>
        </header>

        <div class="input-section">
            <button onclick="testRoundRobin()">üîÑ Test Round Robin</button>
            <button onclick="testFCFS()">üìä Test FCFS</button>
            <button onclick="testSJF()">‚ö° Test SJF</button>
            <button onclick="clearResults()">üóëÔ∏è Limpiar</button>
        </div>

        <div class="results-section">
            <div class="gantt-container">
                <h3>Diagrama de Gantt</h3>
                <div id="ganttChart"></div>
            </div>
            
            <div id="testResults">
                <h3>Resultados del Test</h3>
                <div id="analysisOutput"></div>
            </div>
        </div>
    </div>

    <script src="yamlParser.js"></script>
    <script src="fcfsScheduler.js"></script>
    <script src="sjfScheduler.js"></script>
    <script src="roundRobinScheduler.js"></script>
    <script src="ganttChart.js"></script>
    
    <script>
        // Inicializar componentes
        const ganttChart = new GanttChart();
        ganttChart.initialize('ganttChart');
        
        function testRoundRobin() {
            const analysisOutput = document.getElementById('analysisOutput');
            analysisOutput.innerHTML = '<p>üîÑ Ejecutando test Round Robin...</p>';
            
            // Datos de prueba con llegadas diferentes
            const processes = [
                { id: 1, name: 'P1', cpuTime: 4, arrivalTime: 0 },
                { id: 2, name: 'P2', cpuTime: 3, arrivalTime: 1 },
                { id: 3, name: 'P3', cpuTime: 5, arrivalTime: 3 },
                { id: 4, name: 'P4', cpuTime: 2, arrivalTime: 4 }
            ];
            
            const scheduler = new RoundRobinScheduler(2);
            const result = scheduler.schedule(processes);
            
            // Renderizar diagrama
            ganttChart.render(result, 'RR');
            
            // An√°lisis de s√≠mbolos
            let analysis = '<h4>üìã An√°lisis de S√≠mbolos Expected:</h4>';
            
            processes.forEach(p => {
                const finalProcess = result.processes.find(rp => rp.id === p.id);
                analysis += `<div><strong>P${p.id}:</strong> `;
                analysis += `Llegada en T${p.arrivalTime} (s√≠mbolo >) `;
                if (finalProcess && finalProcess.finishTime) {
                    analysis += `‚Üí Termina en T${finalProcess.finishTime - 1} (s√≠mbolo <)`;
                }
                analysis += `</div>`;
            });
            
            analysis += '<div style="margin-top: 10px; padding: 10px; background: #e3f2fd; border-radius: 5px;">';
            analysis += '<strong>‚úÖ Verificaci√≥n:</strong> Los s√≠mbolos > deben aparecer SOLO en los tiempos de llegada, ';
            analysis += 'y los s√≠mbolos < SOLO cuando cada proceso termina completamente.';
            analysis += '</div>';
            
            analysisOutput.innerHTML = analysis;
        }
        
        function testFCFS() {
            const analysisOutput = document.getElementById('analysisOutput');
            analysisOutput.innerHTML = '<p>üìä Ejecutando test FCFS...</p>';
            
            const processes = [
                { id: 1, name: 'P1', cpuTime: 3, arrivalTime: 0 },
                { id: 2, name: 'P2', cpuTime: 4, arrivalTime: 2 },
                { id: 3, name: 'P3', cpuTime: 2, arrivalTime: 4 }
            ];
            
            const scheduler = new FCFSScheduler();
            const result = scheduler.schedule(processes);
            
            ganttChart.render(result, 'FCFS');
            
            let analysis = '<h4>üìã FCFS - S√≠mbolos Esperados:</h4>';
            processes.forEach(p => {
                const finalProcess = result.processes.find(rp => rp.id === p.id);
                analysis += `<div><strong>P${p.id}:</strong> `;
                analysis += `Llegada T${p.arrivalTime} (>) `;
                if (finalProcess && finalProcess.finishTime) {
                    analysis += `‚Üí Termina T${finalProcess.finishTime - 1} (<)`;
                }
                analysis += `</div>`;
            });
            
            analysisOutput.innerHTML = analysis;
        }
        
        function testSJF() {
            const analysisOutput = document.getElementById('analysisOutput');
            analysisOutput.innerHTML = '<p>‚ö° Ejecutando test SJF...</p>';
            
            const processes = [
                { id: 1, name: 'P1', cpuTime: 6, arrivalTime: 0 },
                { id: 2, name: 'P2', cpuTime: 2, arrivalTime: 0 },
                { id: 3, name: 'P3', cpuTime: 4, arrivalTime: 1 }
            ];
            
            const scheduler = new SJFScheduler();
            const result = scheduler.schedule(processes);
            
            ganttChart.render(result, 'SJF');
            
            let analysis = '<h4>üìã SJF - S√≠mbolos Esperados:</h4>';
            processes.forEach(p => {
                const finalProcess = result.processes.find(rp => rp.id === p.id);
                analysis += `<div><strong>P${p.id}:</strong> `;
                analysis += `Llegada T${p.arrivalTime} (>) `;
                if (finalProcess && finalProcess.finishTime) {
                    analysis += `‚Üí Termina T${finalProcess.finishTime - 1} (<)`;
                }
                analysis += `</div>`;
            });
            
            analysisOutput.innerHTML = analysis;
        }
        
        function clearResults() {
            ganttChart.clearChart();
            document.getElementById('analysisOutput').innerHTML = '<p>Selecciona un test para ver los resultados.</p>';
        }
    </script>
</body>
</html>
