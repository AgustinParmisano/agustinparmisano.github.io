<!DOCTYPE html>
<html>
<head>
    <title>Test FCFS con E/S</title>
    <script src="yamlParser.js"></script>
    <script src="ioScheduler.js"></script>
    <script src="fcfsIOScheduler.js"></script>
</head>
<body>
    <h2>Test FCFS con E/S</h2>
    <div id="results"></div>
    
    <script>
        console.log('üß™ Iniciando test r√°pido...');
        
        try {
            // Crear datos de prueba simple
            const testProcesses = [
                {
                    id: 1,
                    name: "P1",
                    cpuTime: 4,
                    arrivalTime: 0,
                    ioOperations: [
                        { cpuTimeBeforeIO: 2, resource: "R1", duration: 1 }
                    ]
                },
                {
                    id: 2,
                    name: "P2", 
                    cpuTime: 3,
                    arrivalTime: 1,
                    ioOperations: []
                }
            ];
            
            console.log('üìã Procesos de prueba:', testProcesses);
            
            // Ejecutar scheduler
            const scheduler = new FCFSIOScheduler();
            const result = scheduler.schedule(testProcesses);
            
            console.log('‚úÖ Resultado:', result);
            console.log('üìä Timeline:', result.timeline);
            console.log('üí∞ Estad√≠sticas:', result.statistics);
            
            // Mostrar en p√°gina
            document.getElementById('results').innerHTML = `
                <h3>‚úÖ Test Exitoso!</h3>
                <p><strong>Procesos completados:</strong> ${result.processes.length}</p>
                <p><strong>Eventos en timeline:</strong> ${result.timeline.length}</p>
                <p><strong>Tiempo total:</strong> ${result.statistics.simulationTime}</p>
                <p><strong>Eventos E/S:</strong> ${result.timeline.filter(e => e.action && e.action.includes('io')).length}</p>
                
                <h4>Timeline de eventos:</h4>
                <ul>
                ${result.timeline.map(event => 
                    `<li>T=${event.time}: ${event.processName} - ${event.action} ${event.state ? '('+event.state+')' : ''}</li>`
                ).join('')}
                </ul>
            `;
            
        } catch (error) {
            console.error('‚ùå Error en test:', error);
            document.getElementById('results').innerHTML = `
                <h3>‚ùå Error en test</h3>
                <p>${error.message}</p>
                <pre>${error.stack}</pre>
            `;
        }
    </script>
</body>
</html>
